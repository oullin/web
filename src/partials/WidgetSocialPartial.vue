<template>
	<div v-if="social.length > 0" class="rounded-lg border border-slate-200 dark:border-slate-800 dark:bg-linear-to-t dark:from-slate-800 dark:to-slate-800/30 p-5">
		<div class="flex items-center space-x-3 mb-2">
			<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 blog-side-nav-router-link-a-active">
				<path
					stroke-linecap="round"
					stroke-linejoin="round"
					d="M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"
				/>
			</svg>
			<span class="text-xs text-slate-400 dark:text-slate-500">Find Me Online</span>
		</div>

		<ul role="list" class="mt-5 space-y-2">
			<li v-for="item in social" :key="item.uuid">
				<a v-if="socialPlatforms[item.name]" v-lazy-link target="_blank" rel="noopener noreferrer" :href="item.url" :title="item.description" class="group blog-widgets-social-links">
					<svg viewBox="0 0 24 24" aria-hidden="true" class="blog-widgets-social-svg">
						<path :d="socialPlatforms[item.name].icon" />
					</svg>
					<span class="ml-4">{{ socialPlatforms[item.name].text }}</span>
				</a>
			</li>
		</ul>
	</div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue';
import { socialPlatforms } from '@/support/social.ts';
import { useApiStore } from '@api/store.ts';
import { debugError } from '@api/http-error.ts';
import type { SocialResponse } from '@api/response/index.ts';

const apiStore = useApiStore();
const social = ref<SocialResponse[]>([]);

onMounted(async () => {
	try {
		const socialResponse = await apiStore.getSocial();

		if (socialResponse.data) {
			social.value = socialResponse.data;
		}
	} catch (error) {
		debugError(error);
	}
});
</script>
